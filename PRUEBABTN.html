<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
</head>
<body>
    <form id="miFormulario">
        <div>
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required>
        </div>
        <div>
            <label for="fecha">Fecha:</label>
            <input type="date" id="fecha" name="fecha" required>
        </div>
        <div>
            <label for="telefono">Teléfono:</label>
            <input type="tel" id="telefono" name="telefono" required>
        </div>
        <button type="submit">Enviar</button>
    </form>

    <script type="module">
      // Importa los módulos necesarios de Firebase
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
      import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";

      // Tu configuración de Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyBftARJVB3Cq1jQoPXdb-ldF-_NEWnyO_8",
        authDomain: "tcservidor-b8874.firebaseapp.com",
        projectId: "tcservidor-b8874",
        storageBucket: "tcservidor-b8874.firebasestorage.app",
        messagingSenderId: "1033968746876",
        appId: "1:1033968746876:web:d75c3247adc32f785864f9",
        measurementId: "G-R7L2183KKD"
      };

      // Inicializa Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Código para enviar el formulario
      const formulario = document.getElementById('miFormulario');

      formulario.addEventListener('submit', async (event) => {
          event.preventDefault();

          const nombre = formulario.nombre.value;
          const fecha = formulario.fecha.value;
          const telefono = formulario.telefono.value;

          try {
              const docRef = await addDoc(collection(db, "formularios"), {
                  nombre: nombre,
                  fecha: fecha,
                  telefono: telefono,
                  timestamp: new Date()
              });
              console.log("Documento escrito con ID: ", docRef.id);
              alert("¡Formulario enviado con éxito!");
              formulario.reset();
          } catch (e) {
              console.error("Error al añadir el documento: ", e);
              alert("Hubo un error al enviar el formulario.");
          }
      });
    </script>
</body>
</html>
